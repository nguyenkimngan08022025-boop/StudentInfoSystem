@page
@model SecondRazorPage.Pages.Categories.IndexModel

@{
    Layout = "_StudentLayout";
    ViewData["Title"] = "Công tác sinh viên";
    ViewData["CssFile"] = "CTSV.css";   // load đúng css
}

<!-- DÁN phần <body> của bangdiem.html vào đây -->
<div class="app">
    <aside class="sidebar">
        <div class="brand">
            <div class="brand-logo">KHTN</div>
            <h3>TRANG NGƯỜI HỌC</h3>
            <p>Đại học Khoa học Tự nhiên</p>
        </div>

        <nav class="menu">
            <a href="/Categories/Index"><i class="icon">👤</i> Thông tin cá nhân</a>
            <a href="/StudyResult/Index"><i class="icon">📚</i> Kết quả học tập</a>
            <a class="active" href="/Student/CTSV"><i class="icon">🏛️</i> Công tác sinh viên</a>
            <a href="/Student/LichHocThi"><i class="icon">🗓️</i> Lịch học/thi</a>
            <a href="/Student/HocPhi"><i class="icon">💰</i> Học phí</a>
            <a href="/Student/ThongBao"><i class="icon">🔔</i> Thông báo</a>
        </nav>
        <a asp-page="/LoginPage/Index">
        <button class="logout">Đăng xuất</button></a>
    </aside>

    <main class="main">
        <header class="topbar">
            <div class="search">
                <input type="text" placeholder="Tìm kiếm thông tin..." />
                <button aria-label="search">🔍</button>
            </div>
        </header>

        <section class="content-grid">
            <div class="card card-blue">
                <h2>Điểm rèn luyện</h2>
                <table class="mini-table">
                    <thead>
                        <tr><th>Năm học</th><th>Học kỳ</th><th>Điểm</th><th>Xếp loại</th><th>Thời điểm</th></tr>
                    </thead>
                    <tbody>
                      
                            @for (int i = 0; i < Model.DiemRenLuyen.Count; i++)
                            {<tr>
                                <td>@(Model.DiemRenLuyen[i].NamHoc)</td>
                                <td>@(Model.DiemRenLuyen[i].HocKy)</td>
                                <td>@(Model.DiemRenLuyen[i].Diem)</td>
                                <td>@(Model.DiemRenLuyen[i].XepLoai)</td>
                                <td>@(Model.DiemRenLuyen[i].ThoiDiem)</td></tr>
                            }
                        
                        
                    </tbody>
                </table>
            </div>

            <div class="card card-orange">
                <h2>Học bổng</h2>
                <table class="mini-table">
                    <thead>
                        <tr><th>Năm học</th><th>Học kỳ</th><th>Loại</th><th>Số tiền</th><th>Thời gian</th></tr>
                    </thead>
                    <tbody>
                        
                        @for (int i = 0; i < Model.HocBong.Count; i++)
                            {<tr>
                                <td>@(Model.HocBong[i]?.NamHoc)</td>
                                <td>@(Model.HocBong[i]?.HocKy)</td>
                                <td>@(Model.HocBong[i]?.Loai)</td>
                                <td>@(Model.HocBong[i]?.SoTien)</td>
                                <td>@(Model.HocBong[i]?.ThoiGian)</td>
                            </tr>
                            }
                        
                    </tbody>
                </table>
            </div>

            <div class="card card-blue">
                <h2>Khen thưởng</h2>
                <table class="mini-table">
                    <thead>
                        <tr><th>Hình thức</th><th>Thời gian</th><th>Ghi chú</th></tr>
                    </thead>
                    <tbody>
                            @for (int i = 0; i < Model.KhenThuong.Count; i++)
{
                            <tr>
                                <td>@(Model.KhenThuong[i]?.HinhThuc)</td>
                                <td>@(Model.KhenThuong[i]?.ThoiGian)</td>
                                <td>@(Model.KhenThuong[i]?.GhiChu)</td>
                            </tr>
                            }
                    
                       
                    </tbody>
                </table>
            </div>

            <div class="card card-orange">
                <h2>Kỷ luật</h2>
                <table class="mini-table">
                    <thead>
                        <tr><th>Hình thức</th><th>Thời gian</th><th>Ghi chú</th></tr>
                    </thead>
                    <tbody>
                       @for (int i = 0; i < Model.KyLuat.Count; i++)
                            { <tr>
                                <td>@(Model.KyLuat[i]?.HinhThuc)</td>
                                <td>@(Model.KyLuat[i]?.ThoiGian)</td>
                                <td>@(Model.KyLuat[i]?.GhiChu)</td>
                            </tr>
                            }
                       
                    </tbody>
                </table>
            </div>
        </section>
    </main>
</div>

@section Scripts {
    <script>
        const searchInput = document.querySelector(".search input");
        const searchButton = document.querySelector(".search button");

        function handleSearch() {
            const keyword = searchInput.value.trim().toLowerCase();

            // Danh sách từ khóa → đường dẫn
            const links = [
                { keywords: ["Hội thảo", "seminar", "hoi thao"], url: "https://www.facebook.com/DoanHoiHCMUS/" },
                { keywords: ["Workshop", "hoat dong", "diem ren luyen"], url: "https://www.facebook.com/sab.ctda" },
                { keywords: ["tinh nguyen", "hien mau", " the thao", "vieclam"], url: "https://www.facebook.com/story.php/?story_fbid=1106243334879857&id=100064826013158" },
                { keywords: ["học phí", "hoc phi"], url: "hocphi.html" },
                { keywords: ["công tác sinh viên", "hoc phi"], url: "/congtacsinhvien.html" },
            ];

            // Tìm trang phù hợp
            for (let item of links) {
                if (item.keywords.some(kw => keyword.includes(kw))) {
                    window.location.href = item.url;
                    return;
                }
            }

            // Nếu không có từ khóa phù hợp
            alert("Không tìm thấy nội dung phù hợp. Vui lòng thử lại.");
        }

        // Nhấn nút
        searchButton.addEventListener("click", handleSearch);

        // Nhấn Enter
        searchInput.addEventListener("keydown", function(e) {
            if (e.key === "Enter") {
                handleSearch();
            }
        });
    </script>
}
